
# JupiterOne 2021.81 Release

October 5, 2021

## Announcements

J1 will be deploying an updated login experience in the next few weeks - stay tuned!

![](../assets/new_login_screen.png)

## New Features and Improvements

- Delivered a refreshed landing page for querying your data.

- Delivered a new onboarding To-Do list for new J1 users to get oriented and obtain 
  value faster.

- You can now perform bulk uploads of data in the UI without a file size limit.

## Integrations

### AWS

- Fixed validation error when supplying empty array to `macie2.getFindings` API.

- Added `cluster` parameter to `describeContainerInstances` to address AWS 
  notice of validation changes that began on September 24, 2021.

- Added support for ingesting the following additional properties on `aws_instance` entities:
  - `metadataOptionsState`, `httpTokens`, `httpPutResponseHopLimit`, `httpEndpointEnabled`, `enclaveOptionsEnabled`, `hibernationOptionsConfigured`.

### Azure

- Improved handling of errors caused by disabled Azure accounts.

- Improved handling of some errors to better communicate the cause of the error.

### Cloudflare

- Migrated the integration to the latest SDK and infrastructure to allow 
  extended execution time on very large accounts.

- Improved handling and reporting of authentication and authorization errors to users.

### GitHub

- With this update, JupiterOne has requested read-only access to Github Organization Secrets, 
  Github Repository Secrets, and environment secrets metadata which must be granted in the JupiterOne app in Github. 
  Read-only access allows us to access information about the secrets, but not the encrypted values. 
  We have no access to the values of secrets at any time, nor will JupiterOne request such access.
  
  This access will allow you to ask questions in JupiterOne about your secrets, such as 
  "What Secrets are older than 365 days?" or "Which Repos have access to Org Secrets?" or 
  "Are there instances where Repo Secrets override Org Secrets of the same name?"
  
  For more information on GitHub Secrets, please review GitHub documentation about the controls in place with this access:
  - Secrets: https://docs.github.com/en/rest/reference/actions#secrets

  - Get an organization secret: https://docs.github.com/en/rest/reference/actions#get-an-organization-secret
  
  - Get a repository secret: https://docs.github.com/en/rest/reference/actions#get-a-repository-secret

  - Get an environment secret: https://docs.github.com/en/rest/reference/actions#get-an-environment-secret 

  If an existing GitHub integration user does not grant these additional permissions in their GitHub account, 
  then JupiterOne will automatically skip these steps in the integration and not import the Organization and 
  Repository Secret Entities and Properties. The rest of data for already approved permissions will continue 
  to be imported to JupiterOne as expected.  
  
  New users of the GitHub integration in JupiterOne will be required to appprove these permissions to use the integration.
  
- Added support for ingesting the following new entities:

| Resources          | Entity `_type`       | Entity `_class` |
| ------------------ | -------------------- | --------------- |
| GitHub Environment | `github_environment` | `Configuration` |
| GitHub Env Secret  | `github_env_secret`  | `Secret`        |

- Added support for ingesting the following new relationships:

| Source Entity `_type` | Relationship `_class` | Target Entity `_type` |
| --------------------- | --------------------- | --------------------- |
| `github_repo`         | **HAS**               | `github_environment`  |
| `github_environment`  | **HAS**               | `github_env_secret`   |
| `github_env_secret`   | **OVERRIDES**         | `github_org_secret`   |
| `github_env_secret`   | **OVERRIDES**         | `github_repo_secret`  |
| `github_repo`         | **USES**              | `github_env_secret`   |

- Added support for ingesting the following additional properties on `github_account` entities:
  - `createdOn`, `updatedOn`, `description`, `email`, `node`, `databaseId`, `isVerified`, `location`, `websiteUrl`, `webLink`

- Added support for ingesting the following additional properties on `github_team` entities:
  - `createdOn`, `updatedOn`, `databaseId`, `description`, `node`, `privacy`

- Added support for ingesting the following additional properties on `github_user` entities:
  - `company`, `createdOn`, `updatedOn`, `databaseId`, `node`, `isEmployee`, `location`, `websiteUrl`, `email`

- Added support for ingesting the following additional properties on `github_repo` entities:
  - `autoMergeAllowed`, `databaseId`, `deleteBranchOnMerge`, `description`, `homepageUrl`, `node`, `isDisabled`, 
    `isEmpty`, `isFork`, `isInOrganization`, `isLocked`, `isMirror`, `isSecurityPolicyEnabled`, `isTemplate`, 
    `isUserConfigurationRepository`, `lockReason`, `mergeCommitAllowed`, `pushedOn`, `rebaseMergeAllowed`

- Added support for ingesting the following additional properties on `github_pullrequest` entities:
  - `databaseId`, `node`, `commitsCount`, `approvalsCount`, `approvalLastAt`

- Pull requests that are opened, reviewed, or approved by a user who is not part of the
  current organization or collaborator list now have a mapped relationship to a
  GitHub user with the login recorded in the pull request properties.

- Fixed `createdOn` and `updatedOn` properties on `github_org_secret`, `github_repo_secret`, and `github_app` to be Unix timestamp integers.

- Fixed step failures caused by insufficient permissions (disallowed scopes).

### Google Cloud

- Fixed `UNABLE_TO_FIND_PROJECT_ID` error.

- Moved J1-managed questions into the [open source `graph-google-cloud`](https://github.com/JupiterOne/graph-google-cloud/tree/main/jupiterone/questions) project.
  You are welcome to create pull requests!

- Fixed missing `Internet` **ALLOWS** `google_compute_firewall` relationships for
  `0.0.0.0/0`/`::/0` source CIDR blocks.

### Google Workspaces

_**ACTION REQUIRED**_

Log in to the Google Workspace **Admin Console** as a super administrator and:

1. Click **Security** > **API controls**.
2. In the **Domain wide delegation** pane, select **Manage Domain Wide
   Delegation**.
3. Click **Edit** near the JupiterOne Service Account and add additional entries
   under **API scopes**:
   - `https://www.googleapis.com/auth/admin.directory.rolemanagement.readonly`

- Added support for ingesting the following new relationships:

  | Source Entity `_type` | Relationship `_class` | Target Entity `_type` |
  | --------------------- | --------------------- | --------------------- |
  | `google_user`         | **ASSIGNED**          | `google_role`         |

- Added support for ingesting the following new entities:

  | Resources | Entity `_type` | Entity `_class` |
  | --------- | -------------- | --------------- |
  | Role      | `google_role`  | `AccessRole`    |

### Heroku

- Improved OAuth authorization error handling. The integration now reports
  proper error messaging when Heroku responds to HTTP status codes that indicate
  an error occurred.

### Tenable.io

- Added the `name` property to `tenable_vulnerability_finding` entities.

- Fixed the disabled `buildAssetVulnerabilityRelationships` step.

- Fixed duplicate keys for `tenable_vulnerability_finding_is_cve` mapped 
  relationships

- Fixed duplicate keys for `tenable_asset` entities.

- Fixed duplicate keys for `tenable_vulnerability_finding` entities.

- Fixed `Cannot read property 'map' of undefined` when iterating CVEs for `tenable_vulnerability_finding`.


## Fixes and Resolutions

- Fixed an issue with the JupiterOne UI where a user session was terminated due 
  to inactivity and yet the UI did not refresh, delaying the response to the user.
  
- Resolved an issue where the overall compliant percentage was incorrectly 
  displaying as zero.
  
- Resolved an issue where logging out redirected a user to the incorrect URL.
 
- Fixed an issue in the Compliance app where the overall summary percentage 
  appeared to display 0%, even with multiple underlying compliance 
  frameworks toggled on with percentages > 0%.

